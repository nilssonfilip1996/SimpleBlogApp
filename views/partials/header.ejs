<!DOCTYPE html>
<html lang="en" >
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" href="/styles/main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <title>My Blog</title>
  </head>
  
  <body class="gradient-background d-flex flex-column min-vh-100"></body>
    <section id="headerSection">
      <nav class="navbar navbar-expand-lg fw-bolder fs-5 mx-2" data-bs-theme="dark">
        <a class="navbar-brand fs-2" href="/">My Blog</a>
        <button class="navbar-toggler me-2" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse m-2" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item active">
              <a class="nav-link" href="/">Home</a>
            </li>
            <li class="nav-item">
              <% if (signedIn) { %>
                <a class="nav-link" href="/create">Create Post</a>
              <% } else %>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/about">About me</a>
            </li>
          </ul>
          <% if (signedIn) { %>
            <a href="/logOut" class="btn btn-danger" role="button">Log Out</a>
          <% } else { %>
            <button class="btn btn-success" type="button" data-bs-toggle="modal" data-bs-target="#loginModal">Log In</button>
          <% } %>
          <% if (locals.showModal) { %>
            <% if (showModal) { %>
             
            <% } %>
          <% } %>
        </div>
      </nav>
    </section>


<!-- Login Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content text-bg-primary">
          <div class="modal-header">
              <h5 class="modal-title" id="loginModalLabel">Login</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <form>
                  <div class="mb-3">
                      <label for="email" class="form-label">Email address</label>
                      <input type="email" class="form-control" name="inpEmail" id="inpEmail" value="admin@blog.se" required>
                  </div>
                  <div class="mb-3">
                      <label for="password" class="form-label">Password</label>
                      <input type="password" class="form-control" name="inpPassword" id="inpPassword" value="password" required>
                  </div>
                  <div class="hide-element mb-3 textWarningColor fs-4 fw-bold" id="wrong-admin-cred">
                    Wrong Email or password.
                  </div>
                  <button type="submit" formaction="/logIn" formmethod="post" class="btn btn-success">Login</button>
              </form>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
      </div>
  </div>
</div>


<!-- Display the Login form again if the user submitted the wrong credentials on the last login attempt. -->
<% if (locals.showLoginModal) { %>
  <% if (showLoginModal) { %>
    <script>
      //Wait for the DOM to finish rendering.
      document.addEventListener("DOMContentLoaded", () => {
        var loginModal = new bootstrap.Modal(document.getElementById("loginModal"));
        loginModal.show();
        $('#inpPassword').addClass('is-invalid');
        $('#inpEmail').addClass('is-invalid');
        $('#wrong-admin-cred').removeClass('hide-element')
      });
    </script>
  <% } %>
<% } %>

    


